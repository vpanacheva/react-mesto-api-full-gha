{"ast":null,"code":"import{useEffect}from\"react\";function usePopupClose(isOpen,closePopup){useEffect(function(){if(!isOpen)return;// останавливаем действие эффекта, если попап закрыт\nvar handleOverlay=function handleOverlay(e){// если есть `popup_opened` в классах блока, значит, кликнули на оверлей\nif(e.target.classList.contains(\"popup_opened\")){closePopup();}};var handleEscape=function handleEscape(e){if(e.key===\"Escape\"){closePopup();}};document.addEventListener(\"keydown\",handleEscape);document.addEventListener(\"mousedown\",handleOverlay);//  обязательно удаляем обработчики в `clean-up`- функции\nreturn function(){document.removeEventListener(\"keydown\",handleEscape);document.removeEventListener(\"mousedown\",handleOverlay);};// обязательно следим за `isOpen`, чтобы срабатывало только при открытии, а не при любой перерисовке компонента\n},[isOpen]);}export{usePopupClose};","map":{"version":3,"names":["useEffect","usePopupClose","isOpen","closePopup","handleOverlay","e","target","classList","contains","handleEscape","key","document","addEventListener","removeEventListener"],"sources":["/Users/sema66/Desktop/react-mesto-api-full-gha-1/frontend/src/hooks/usePopupClose.js"],"sourcesContent":["import { useEffect } from \"react\";\n\nfunction usePopupClose(isOpen, closePopup) {\n  useEffect(() => {\n    if (!isOpen) return; // останавливаем действие эффекта, если попап закрыт\n\n    const handleOverlay = (e) => {\n      // если есть `popup_opened` в классах блока, значит, кликнули на оверлей\n      if (e.target.classList.contains(\"popup_opened\")) {\n        closePopup();\n      }\n    };\n\n    const handleEscape = (e) => {\n      if (e.key === \"Escape\") {\n        closePopup();\n      }\n    };\n\n    document.addEventListener(\"keydown\", handleEscape);\n    document.addEventListener(\"mousedown\", handleOverlay);\n\n    //  обязательно удаляем обработчики в `clean-up`- функции\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscape);\n      document.removeEventListener(\"mousedown\", handleOverlay);\n    };\n    // обязательно следим за `isOpen`, чтобы срабатывало только при открытии, а не при любой перерисовке компонента\n  }, [isOpen]);\n}\n\nexport { usePopupClose };"],"mappings":"AAAA,OAASA,SAAS,KAAQ,OAAO,CAEjC,QAAS,CAAAC,aAAaA,CAACC,MAAM,CAAEC,UAAU,CAAE,CACzCH,SAAS,CAAC,UAAM,CACd,GAAI,CAACE,MAAM,CAAE,OAAQ;AAErB,GAAM,CAAAE,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,CAAC,CAAK,CAC3B;AACA,GAAIA,CAAC,CAACC,MAAM,CAACC,SAAS,CAACC,QAAQ,CAAC,cAAc,CAAC,CAAE,CAC/CL,UAAU,CAAC,CAAC,CACd,CACF,CAAC,CAED,GAAM,CAAAM,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIJ,CAAC,CAAK,CAC1B,GAAIA,CAAC,CAACK,GAAG,GAAK,QAAQ,CAAE,CACtBP,UAAU,CAAC,CAAC,CACd,CACF,CAAC,CAEDQ,QAAQ,CAACC,gBAAgB,CAAC,SAAS,CAAEH,YAAY,CAAC,CAClDE,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAER,aAAa,CAAC,CAErD;AACA,MAAO,WAAM,CACXO,QAAQ,CAACE,mBAAmB,CAAC,SAAS,CAAEJ,YAAY,CAAC,CACrDE,QAAQ,CAACE,mBAAmB,CAAC,WAAW,CAAET,aAAa,CAAC,CAC1D,CAAC,CACD;AACF,CAAC,CAAE,CAACF,MAAM,CAAC,CAAC,CACd,CAEA,OAASD,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}