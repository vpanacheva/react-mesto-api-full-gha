{"ast":null,"code":"import React,{useContext,useEffect,useRef}from'react';import{PopupWithForm}from'./PopupWithForm.js';import{CurrentUserContext}from'../contexts/CurrentUserContext.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditAvatarPopup(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateAvatar=_ref.onUpdateAvatar,isLoading=_ref.isLoading;var currentUser=useContext(CurrentUserContext);/** подписка на контекст */var avatarRef=useRef();/** реф для аватара */function handleSubmit(e){e.preventDefault();onUpdateAvatar({/** значение инпута, полученное с помощью рефа */avatar:avatarRef.current.value});}useEffect(function(){if(!isOpen){avatarRef.current.value=currentUser.avatar;}else{avatarRef.current.value='';}},[currentUser,isOpen]);return/*#__PURE__*/_jsx(PopupWithForm,{name:\"popup-avatar\",title:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",text:isLoading?'Сохраненяем...':'Сохранить',isOpen:isOpen,onClose:onClose,onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"fieldset\",{className:\"form__input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"url\",name:\"avatar\",id:\"link-avatar-input\",className:\"form__item form__item_avatar_link\",placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\",required:true,ref:avatarRef}),/*#__PURE__*/_jsx(\"span\",{className:\"form__item-error link-avatar-input-error\"})]})});}export{EditAvatarPopup};","map":{"version":3,"names":["React","useContext","useEffect","useRef","PopupWithForm","CurrentUserContext","jsx","_jsx","jsxs","_jsxs","EditAvatarPopup","_ref","isOpen","onClose","onUpdateAvatar","isLoading","currentUser","avatarRef","handleSubmit","e","preventDefault","avatar","current","value","name","title","text","onSubmit","children","className","type","id","placeholder","required","ref"],"sources":["/Users/sema66/Desktop/react-mesto-api-full-gha-1/frontend/src/components/EditAvatarPopup.js"],"sourcesContent":["import React, { useContext, useEffect, useRef } from 'react';\nimport { PopupWithForm } from './PopupWithForm.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, isLoading }) {\n  const currentUser = useContext(CurrentUserContext); /** подписка на контекст */\n  const avatarRef = useRef(); /** реф для аватара */\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar({\n      /** значение инпута, полученное с помощью рефа */\n      avatar:\n        avatarRef.current\n          .value,\n    });\n  }\n\n  useEffect(() => {\n    if (!isOpen) {\n      avatarRef.current.value = currentUser.avatar\n    } else {\n      avatarRef.current.value = ''\n    }\n  }, [currentUser, isOpen]);\n\n\n  return (\n    <PopupWithForm\n      name='popup-avatar'\n      title='Обновить аватар'\n      text={isLoading? 'Сохраненяем...' : 'Сохранить'}\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <fieldset className='form__input-container'>\n        <input\n          type='url'\n          name='avatar'\n          id='link-avatar-input'\n          className='form__item form__item_avatar_link'\n          placeholder='Ссылка на картинку'\n          required\n          ref={avatarRef}\n        />\n        <span className='form__item-error link-avatar-input-error' />\n      </fieldset>\n    </PopupWithForm>\n  );\n}\n\nexport { EditAvatarPopup };\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC5D,OAASC,aAAa,KAAQ,oBAAoB,CAClD,OAASC,kBAAkB,KAAQ,mCAAmC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEvE,QAAS,CAAAC,eAAeA,CAAAC,IAAA,CAAiD,IAA9C,CAAAC,MAAM,CAAAD,IAAA,CAANC,MAAM,CAAEC,OAAO,CAAAF,IAAA,CAAPE,OAAO,CAAEC,cAAc,CAAAH,IAAA,CAAdG,cAAc,CAAEC,SAAS,CAAAJ,IAAA,CAATI,SAAS,CACnE,GAAM,CAAAC,WAAW,CAAGf,UAAU,CAACI,kBAAkB,CAAC,CAAE,2BACpD,GAAM,CAAAY,SAAS,CAAGd,MAAM,CAAC,CAAC,CAAE,sBAE5B,QAAS,CAAAe,YAAYA,CAACC,CAAC,CAAE,CACvBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBN,cAAc,CAAC,CACb,iDACAO,MAAM,CACJJ,SAAS,CAACK,OAAO,CACdC,KACP,CAAC,CAAC,CACJ,CAEArB,SAAS,CAAC,UAAM,CACd,GAAI,CAACU,MAAM,CAAE,CACXK,SAAS,CAACK,OAAO,CAACC,KAAK,CAAGP,WAAW,CAACK,MAAM,CAC9C,CAAC,IAAM,CACLJ,SAAS,CAACK,OAAO,CAACC,KAAK,CAAG,EAAE,CAC9B,CACF,CAAC,CAAE,CAACP,WAAW,CAAEJ,MAAM,CAAC,CAAC,CAGzB,mBACEL,IAAA,CAACH,aAAa,EACZoB,IAAI,CAAC,cAAc,CACnBC,KAAK,CAAC,uFAAiB,CACvBC,IAAI,CAAEX,SAAS,CAAE,gBAAgB,CAAG,WAAY,CAChDH,MAAM,CAAEA,MAAO,CACfC,OAAO,CAAEA,OAAQ,CACjBc,QAAQ,CAAET,YAAa,CAAAU,QAAA,cAEvBnB,KAAA,aAAUoB,SAAS,CAAC,uBAAuB,CAAAD,QAAA,eACzCrB,IAAA,UACEuB,IAAI,CAAC,KAAK,CACVN,IAAI,CAAC,QAAQ,CACbO,EAAE,CAAC,mBAAmB,CACtBF,SAAS,CAAC,mCAAmC,CAC7CG,WAAW,CAAC,oGAAoB,CAChCC,QAAQ,MACRC,GAAG,CAAEjB,SAAU,CAChB,CAAC,cACFV,IAAA,SAAMsB,SAAS,CAAC,0CAA0C,CAAE,CAAC,EACrD,CAAC,CACE,CAAC,CAEpB,CAEA,OAASnB,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}